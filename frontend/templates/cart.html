{% extends "base.html" %}
{% block title %}购物车{% endblock %}
{% block content %}
<h2>购物车</h2>
{% if cart_items %}
<form action="{{ url_for('cart.update_cart') }}" method="post">
	<table>
		<thead>
		<tr>
			<th>菜品</th>
			<th>单价</th>
			<th>数量</th>
			<th>小计</th>
		</tr>
		</thead>
		<tbody>
		{% for item in cart_items %}
		<tr>
			<td>{{ item.name }}</td>
			<td>¥ {{ "%.2f"|format(item.price) }}</td>
			<td>
				<input type="number" min="0" step="1" name="qty_{{ item.id }}" value="{{ item.quantity }}">
			</td>
			<td>¥ {{ "%.2f"|format(item.subtotal) }}</td>
		</tr>
		{% endfor %}
		</tbody>
	</table>
	<p class="cart-total">总计：¥ {{ "%.2f"|format(cart_total) }}</p>
	<div class="cart-actions">
		<button type="submit">更新数量</button>
	</div>
</form>
<form action="{{ url_for('cart.clear_cart') }}" method="post" class="inline-form">
	<button type="submit" class="secondary">清空购物车</button>
</form>
<form action="{{ url_for('order.create') }}" method="post" class="inline-form">
	<button type="submit" class="primary">提交订单</button>
</form>
{% else %}
<p>购物车为空，快去挑选美食吧！</p>
{% endif %}
{% endblock %}


